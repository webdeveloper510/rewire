<!DOCTYPE html>
{% comment %} {% include 'header/header.html'%} {% endcomment %}
{% if messages%}
<ul class="messages">
   {% for message in messages %}
   <div class="container-fluid p-0">
   <div class="alert {{ message.tags }} alert-dismissible" role="alert" >
   <center>{{ message }}</center>
   {% endfor %}
</ul>
{% endif %}  
{% load static %}
<link rel="stylesheet" href="{% static 'app.css' %}">
<!-- =========================================================
   * Sneat - Bootstrap 5 HTML Admin Template - Pro | v1.0.0
   ==============================================================
   
   * Product Page: https://themeselection.com/products/sneat-bootstrap-html-admin-template/
   * Created by: ThemeSelection
   * License: You must have a valid license purchased in order to legally use the theme for your project.
   * Copyright ThemeSelection (https://themeselection.com)
   
   =========================================================
    -->
<!-- beautify ignore:start -->
<html
   lang="en"
   class="light-style layout-menu-fixed"
   dir="ltr"
   data-theme="theme-default"
   data-assets-path="../assets/"
   data-template="vertical-menu-template-free"
   >
   <head>
      <meta charset="utf-8" />
      <meta
         name="viewport"
         content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0"
         />
      <title>Dashboard - Analytics | Sneat - Bootstrap 5 HTML Admin Template - Pro</title>
      <meta name="description" content="" />
      <!-- Favicon -->
      <link rel="icon" type="image/x-icon" href="static/assets/img/favicon/favicon.ico" />
      <!-- Fonts -->
      <link rel="preconnect" href="https://fonts.googleapis.com" />
      {% comment %} 
      <link rel="preconnect" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css" />
      {% endcomment %}
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
      <link
         href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&display=swap"
         rel="stylesheet"
         />
      <!-- Icons. Uncomment required icon fonts -->
      <link rel="stylesheet" href="static/assets/vendor/fonts/boxicons.css" />
      <!-- Core CSS -->
      <link rel="stylesheet" href="static/assets/vendor/css/core.css" class="template-customizer-core-css" />
      <link rel="stylesheet" href="static/assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
      <link rel="stylesheet" href="static/assets/css/demo.css" />
      <!-- Vendors CSS -->
      <link rel="stylesheet" href="static/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
      <link rel="stylesheet" href="static/assets/vendor/libs/apex-charts/apex-charts.css" />
      <!-- Page CSS -->
      <!-- Helpers -->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
      <script src="static/assets/vendor/js/helpers.js"></script>
      <!--! Template customizer & Theme config files MUST be included after core stylesheets and helpers.js in the <head> section -->
      <!--? Config:  Mandatory theme config file contain global vars & default theme options, Set your preferred theme option in this file.  -->
      <script src="static/assets/js/config.js"></script>
   </head>
   <body>
     
   
      <form class="" action="" method="POST">
         {% csrf_token %}
         <!-- Layout wrapper -->
         <div class="layout-wrapper layout-content-navbar">
         <div class="layout-container">
         <!-- Menu -->
         {% include 'header/sidebar.html'%}
         <div class="layout-page">
         {% include 'header/header.html'%}
         <!-- Navbar -->
         <div class="content-wrapper">
         <!-- Content -->
         <div class="container-xxl flex-grow-1 container-p-y">
            <div class="row">
               <div class="row">
                  <div class="col-md-4">
                     <div class="card">
                        <div class="card-body text-center box-moddel">
                           <h3 class="card-title mb-2">1</h3>
                           <p><span class="fw-semibold d-block mb-1">Total Policies</span></p>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-4">
                     <div class="card">
                        <div class="card-body text-center box-moddel">
                           <h3 class="card-title text-nowrap mb-1">$4,679</h3>
                           <p><span class="fw-semibold d-block mb-1">Total Earnings</span></p>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-4">
                     <div class="card" style="height: 100%;">
                        <div class="card-body text-center box-moddel">
                           <h3 class="card-title text-nowrap mb-1">$4,679</h3>
                           <p><span class="fw-semibold d-block mb-1">Earned</span></p>
                        </div>
                     </div>
                  </div>
                 
                  
                
                  <button id="addRow" type= "button" style="width:100px" class="show" onclick="addRows(event)" name="check" value ="add">Add a Policy</button> 
                  <button id="addRow" type= "button" style="width:100px" class="show" onclick="addRo(event)" name="check2" value="abb">Show Registered Policy</button> 
                  <table id="example" class="display" width="100%" cellspacing="0">
                     <thead>
                        <tr>
                           <th>Insurer</th>
                           <th>Product</th>
                           <th>Policy Number</th>
                           <th>Renewal Date</th>
                           <th>Policy Yearly Premium</th>
                           <th>Status</th>
                           <th>Save</th>
                           <th>Update</th>
                        </tr>
                     </thead>
                     <tbody>
                     
                        {%for i in z%} 
                        <tr>
                           <td id ="hr">
                              <input type="text"  id="t1" value=""/> 
                           </td>
                           <td id="2" >
                              <input type="text" id="t2"  value="" /> 
                           </td>
                           <td id = "3">
                              <input type="number" id="t3" value=""/> 
                           </td>
                           <td>
                              <input type="date" id="t4"   value=""/> 
                           </td>
                           <td>
                              <input type="text" id="t5"  value=""/> 
                           </td>
                           <td>
                              <input type="text" id="t6"  value=""/> 
                           </td>
                           <td>
                              <button type="submit" id="{{forloop.counter}}" onclick="addData(this)"  class="btn" name="test" value="raw">Use</button>
                           </td>
                        </tr>
                        {%endfor%}
                     </tbody>
                  </table>
               </div>
            </div>
         </div>
         </script>
         <script src="static/assets/vendor/libs/jquery/jquery.js"></script>
         <script src="static/assets/vendor/libs/popper/popper.js"></script>
         <script src="static/assets/vendor/js/bootstrap.js"></script>
         <script src="static/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
         <script src="static/assets/vendor/js/menu.js"></script>
         <!-- endbuild -->
         <!-- Vendors JS -->
         <script src="static/assets/vendor/libs/apex-charts/apexcharts.js"></script>
         <!-- Main JS -->
         <script src="static/assets/js/main.js"></script>
         <!-- Page JS -->
         <script src="static/assets/js/dashboards-analytics.js"></script>
         <!-- Place this tag in your head or just before your close body tag. -->
         <script async defer src="https://buttons.github.io/buttons.js"></script>
   </body>
</html>
</form>
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/dataTables.bootstrap4.min.css">
<script src ="https://code.jquery.com/jquery-3.5.1.js"></script>
<script src ="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
<script src ="https://cdn.datatables.net/1.11.5/js/dataTables.bootstrap4.min.js"></script>
<script>
   function addRo(e) {
     
      
     let rows_html = `  
      
   
   
        {%for i in show%}
        {% if i.created_by_id == request.user.id %}
       <tr>
        
        <td>{{i.insurer}}</td>
        <td>
          {{i.product}}</td>
        <td>{{i.policy_number}} </td>
        <td>
          {{i.renewal|date:'Y-m-d'}}</td>
        <td>
          {{i.policy_yearly}}</td>
        <td>
          {{i.status}}</td>  
          
        <td>
         {% if a == True%}
          <button type="submit" id="{{forloop.counter}}" onclick="addData(this)"  class="btn" name="test" value="raw">Use</button>
        </td>
        {%endif%}
      
           <td> 
            <a href="{% url 'update' i.id %}" class="btn btn-info btn-lg">
             <span class="glyphicon glyphicon-pencil"></span> Update 
           </a></td>
        
   </tr>
   {%endif%}
   {%endfor%}
   `;
   $('#example').DataTable().destroy();
   $("#example tbody").append(rows_html);
   $(function(){
   $('#example').dataTable({});
   });
   }
   
   
     function addRows(e) {
      
      let row_html = ` 
     
        <tr>
         
         <td id ="hr">
           <input type="text"  id="t1" value=""/> </td>
         <td id="2" >
           <input type="text" id="t2"  value="" /> </td>
         <td id = "3">
           <input type="number" id="t3" value=""/> </td>
         <td>
           <input type="date" id="t4"   value=""/> </td>
         <td>
           <input type="text" id="t5"  value=""/> </td>
         <td>
           <input type="text" id="t6"  value=""/> </td>  
         <td>
           <button type="submit" id="{{forloop.counter}}" onclick="addData(this)"  class="btn" name="test" value="raw">Use</button>
         </td>
       
         <td> 
           {% if a == True%}
           <a href="{% url 'update' i.id %}" class="btn btn-info btn-lg">
           <span class="glyphicon glyphicon-pencil"></span> Update 
         </a></td>
      
        {%endif%}
     
         
       
   </tr>
   
   `;
   $('#example').DataTable().destroy();
   $("#example tbody").append(row_html);
   $(function(){
     $('#example').dataTable({});
   });
   }
   
     function addData (current){
      
         console.log('add data',$(current).parent().parent().find("#t1").val());
         let t1 = $(current).parent().parent().find("#t1").val();
         console.log(t1)
         let t2 = $(current).parent().parent().find("#t2").val();
         let t3 = $(current).parent().parent().find("#t3").val();
         let t4 = $(current).parent().parent().find("#t4").val();
         let t5 = $(current).parent().parent().find("#t5").val();
         let t6 = $(current).parent().parent().find("#t6").val();
   
         console.log('my value',[t1,t2,t3,t4,t5,t6])
         $.ajax({
           type:"GET",
           url: 'policy',
           data: {
           'd1':   t1,
           "d2":   t2,
           "d3":   t3,
           "d4":   t4,
           "d5":   t5,
           "d6":   t6,
           },
           dataType: 'json',
           success: function (data) {
               console.log('coming data', data)
           }
       });
         
      
     } 
   
    
   
   
       $(document).ready(function() {
         //var url = 'http://www.json-generator.com/api/json/get/ckDfqBChNK?indent=2';
         var url = 'http://www.json-generator.com/api/json/get/bQzyuEGndu?indent=2';
         var table = $('#example').DataTable();
   
       }); 
    
</script>
